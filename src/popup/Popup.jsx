import { useState, useEffect } from 'react';
import './Popup.css';

export const Popup = () => {
  const link = 'https://github.com/guocaoyi/create-chrome-ext';

  const [currentUrl, setCurrentUrl] = useState('');

  useEffect(() => {
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
      if (tabs.length > 0) {
        setCurrentUrl(tabs[0].url);
      }
    });
  }, []);

  const handleSummarize = () => {
    alert('ğŸ“ ìš”ì•½ ë²„íŠ¼ í´ë¦­ë¨!');
    // TODO: í˜„ì¬ íƒ­ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ í›„ GPT API í˜¸ì¶œ
  };

  const handleTTS = () => {
    alert('ğŸ”Š TTS ì‹¤í–‰!');
    // TODO: ìš”ì•½ëœ í…ìŠ¤íŠ¸ë¥¼ TTSë¡œ ì¬ìƒ
  };

  return (
    <main>
      <h3>Popup Page</h3>      

      <div className="actions">
        <button className="action-button" onClick={handleSummarize}>
          ğŸ“ ìš”ì•½í•˜ê¸°
        </button>
        <button className="action-button" onClick={handleTTS}>
          ğŸ”Š TTS ì‹¤í–‰
        </button>
      </div>
      <h3>í˜„ì¬ íƒ­ URL</h3>
            <p style={{ fontSize: '1rem', wordBreak: 'break-all' }}>{currentUrl}</p>
      <a href={link} target="_blank" rel="noreferrer">
        generated by create-chrome-ext
      </a>
    </main>
  );
};

export default Popup;
